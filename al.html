<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intern Al - H-int</title>
  <link rel="icon" href="assets/images/logo.png" type="image/png" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

  <style>
    /* 폰트 설정 */
    @font-face { font-family: 'HDHyundaiLight'; src: url('assets/fonts/HDHyundai-Light.ttf') format('truetype'); }
    @font-face { font-family: 'HDHyundaiBold';  src: url('assets/fonts/HDHyundai-Bold.ttf') format('truetype'); }

    :root {
      --discovery-blue: #003087;
      --prosperity-green: #008233;
      --trust-blue: #002554;
      --gray-text: #63666A;
      --bg-light: #f4f4f4;
    }

    /* 기본 스타일 */
    * { box-sizing: border-box; }
    body {
      font-family: 'HDHyundaiLight', sans-serif;
      margin: 0;
      background: var(--bg-light);
      color: var(--gray-text);
      opacity: 0;
      transition: opacity 0.6s ease-in-out;
    }
    body.loaded { opacity: 1; }

    /* Splash Screen */
    #splash {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: #fff;
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      z-index: 9999;
      animation: fadeSplash 0.8s ease forwards;
    }
    #splash img { width: 60px; margin-bottom: 1rem; }
    .splash-text {
      font-family: 'HDHyundaiBold';
      font-size: 1.5rem;
      color: var(--discovery-blue);
    }
    @keyframes fadeSplash { 0%{opacity:1;} 99%{opacity:0;} 100%{display:none;}}  

    /* Navbar */
    .navbar {
      position: sticky; top: 0;
      background: #fff;
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem 1.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      z-index: 1000;
    }
    .navbar img { height:32px; }
    .navbar-title {
      position: absolute; left:50%; transform: translateX(-50%);
      font-family: 'HDHyundaiBold'; font-size:1.5rem;
    }
    .navbar-title a { text-decoration:none; color:inherit; }
    .navbar-title .hd { color: var(--discovery-blue); }
    .menu-icon { font-size:1.5rem; cursor:pointer; }

    /* Menu Popup */
    .menu-popup {
      position: absolute; top:64px; right:20px;
      background: #fff;
      border:1px solid #ccc; border-radius:10px;
      box-shadow:0 4px 12px rgba(0,0,0,0.15);
      padding:0.5rem 1rem;
      opacity:0; pointer-events:none;
      transform: translateY(-10px);
      transition: all 0.3s;
    }
    .menu-popup.active { opacity:1; pointer-events:auto; transform:translateY(0); }
    .menu-popup ul { list-style:none; margin:0; padding:0; }
    .menu-popup li { margin:0.5rem 0; }
    .menu-popup a { text-decoration:none; color:var(--gray-text); font-size:0.95rem; }
    .menu-popup a:hover { color: var(--discovery-blue); }

    /* AL Intro */
    .al-intro {
      display:flex; flex-direction:column; align-items:center;
      padding:4rem 1rem;
    }
    .al-intro .modal-title {
      font-family: 'HDHyundaiBold'; font-size:2rem;
      background:-webkit-linear-gradient(90deg,#00B3FF 0%,#9932CC 100%);
      background:linear-gradient(90deg,#00B3FF 0%,#9932CC 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text; color:transparent;
      text-align:center;
      margin-bottom:1rem;
    }
    .al-intro .intro-text {
      font-size:1rem; text-align:center; margin-bottom:2rem;
      line-height:1.5;
    }

    /* Modal overlay */
    .modal {
      position:fixed; top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.6);
      display:none; justify-content:center; align-items:center;
      padding:1rem;
      z-index:10000;
    }
    .modal.active { display:flex; }

    .modal-content {
      background:#fff;
      border-radius:12px;
      width:100%; max-width:500px;
      padding:2rem;
      position:relative;
      display:flex; flex-direction:column;
    }
    .close-modal {
      position:absolute; top:1rem; right:1rem;
      background:transparent; border:none;
      font-size:1.5rem; cursor:pointer;
      color:var(--gray-text);
    }

    /* Steps */
    .step { display:none; }
    .step.active { display:block; }

    /* Progress Bar */
    .progress {
      height:8px; background:#eee;
      border-radius:4px; overflow:hidden;
      margin-bottom:1rem;
    }
    .progress-bar {
      height:100%; width:0%; background:var(--discovery-blue);
      transition: width 0.3s;
    }

    /* Question */
    .question-text {
      font-size:1.1rem; margin-bottom:1.5rem;
    }
    .answer-buttons {
      display:flex; justify-content:space-around; margin-bottom:1.5rem;
    }
    .answer-buttons .btn {
      flex:1; margin:0 0.5rem;
    }
    .nav-buttons { display:flex; justify-content:space-between; }

    /* Analysis */
    .loading-indicator {
      width:40px; height:40px;
      border:4px solid var(--prosperity-green);
      border-top-color:transparent;
      border-radius:50%;
      animation: spin 1s linear infinite;
      margin:2rem auto;
    }
    @keyframes spin { to { transform:rotate(360deg);} }

    /* Result */
    .result-department {
      font-family:'HDHyundaiBold';
      font-size:1.5rem; text-align:center;
      margin-bottom:0.5rem;
      background:-webkit-linear-gradient(90deg,#00B3FF 0%,#9932CC 100%);
      background:linear-gradient(90deg,#00B3FF 0%,#9932CC 100%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      background-clip:text; color:transparent;
    }
    .result-role {
      font-family:'HDHyundaiBold'; font-size:1.3rem;
      text-align:center; margin-bottom:1rem;
      color:var(--trust-blue);
    }
    .result-desc {
      font-size:1rem; text-align:center;
      margin-bottom:2rem; line-height:1.4;
    }

    /* Footer & Buttons */
    .modal-footer { text-align:center; }
    .footer-note {
      font-size:0.95rem; color:var(--gray-text);
      margin:1rem 0;
    }
    .btn { padding:0.75rem 1.5rem; border:none; border-radius:8px;
      font-family:'HDHyundaiBold'; font-size:1rem; cursor:pointer;
      transition:background 0.2s,color 0.2s; }
    .btn.primary { background:var(--discovery-blue); color:#fff; }
    .btn.primary:hover { background:#002f6c; }
    .btn.secondary { background:var(--prosperity-green); color:#fff; }
    .btn.secondary:hover { background:#006629; }
    .btn.tertiary { background:transparent; color:var(--trust-blue);
      border:1px solid var(--trust-blue); }
    .btn.tertiary:hover { background:var(--trust-blue); color:#fff; }
    .btn-group { display:flex; justify-content:center; gap:0.5rem; }

    /* Responsive */
    @media (max-width:480px) {
      .modal-content { padding:1rem; }
      .navbar { padding:0.75rem 1rem; }
      .al-intro { padding:2rem 1rem; }
      .question-text { font-size:1rem; }
      .btn { font-size:0.9rem; padding:0.5rem 1rem; }
    }
  </style>
</head>

<body>
  <!-- Splash -->
  <div id="splash">
    <img src="assets/images/logo.png" alt="로고" />
    <div class="splash-text">H-int Dream</div>
  </div>

  <!-- Navbar -->
  <div class="navbar">
    <img src="assets/images/logo.png" alt="HD현대중공업 로고" />
    <div class="navbar-title">
      <a href="index.html"><span class="hd">H</span>int <span class="hd">D</span>ream</a>
    </div>
    <div class="menu-icon" onclick="toggleMenu()">☰</div>
  </div>
  <div class="menu-popup" id="menuPopup">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="ship.html">Intern Ship</a></li>
      <li><a href="view.html">Intern View</a></li>
      <li><a href="net.html">Intern Net</a></li>
      <li><a href="al.html" class="active">Intern Al</a></li>
    </ul>
  </div>

  <!-- AL Intro -->
  <div class="al-intro">
    <div class="modal-title">Intern Al</div>
    <div class="intro-text">AI가 여러분의 내면을 분석하여<br>가장 잘 맞는 직무를 추천합니다.</div>
    <button id="startBtn" class="btn primary">테스트 시작</button>
  </div>

  <!-- Modal -->
  <div id="alModal" class="modal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal()">×</button>
      <!-- Intro Step -->
      <div id="stepIntro" class="step active">
        <h2>테스트를 시작합니다</h2>
        <button id="beginBtn" class="btn primary">시작하기</button>
      </div>
      <!-- Question Step -->
      <div id="stepQuestion" class="step">
        <div class="progress"><div id="progressBar" class="progress-bar"></div></div>
        <div id="questionText" class="question-text"></div>
        <div class="answer-buttons">
          <button id="ans1Btn" class="btn tertiary"></button>
          <button id="ans2Btn" class="btn tertiary"></button>
        </div>
        <div class="nav-buttons">
          <button id="prevBtn" class="btn tertiary">이전</button>
          <button id="nextBtn" class="btn tertiary">다음</button>
        </div>
      </div>
      <!-- Analysis Step -->
      <div id="stepAnalysis" class="step">
        <div class="loading-indicator"></div>
        <p style="text-align:center;">결과를 분석 중입니다...</p>
      </div>
      <!-- Result Step -->
      <div id="stepResult" class="step">
        <div class="result-department"></div>
        <div class="result-role"></div>
        <div class="result-desc"></div>
        <div class="modal-footer">
          <button class="btn primary" onclick="window.open('https://recruit.hd.com/kr','_blank')">HD현대중공업 지원하러 가기</button>
          <p class="footer-note">인턴십 현장이 궁금하다면?</p>
          <button class="btn secondary" onclick="location.href='view.html'">Intern View로 이동</button>
          <div class="btn-group">
            <button id="restartBtn" class="btn tertiary">테스트 다시하기</button>
            <button id="closeBtn" class="btn tertiary">닫기</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init({ duration:800, once:true });
    // Menu toggle
    function toggleMenu() {
      document.getElementById('menuPopup').classList.toggle('active');
    }
    window.addEventListener('click', e => {
      const menu = document.getElementById('menuPopup');
      const icon = document.querySelector('.menu-icon');
      if (!menu.contains(e.target) && !icon.contains(e.target)) menu.classList.remove('active');
    });

    // Modal controls
    const modal = document.getElementById('alModal');
    const startBtn = document.getElementById('startBtn');
    const beginBtn = document.getElementById('beginBtn');
    const closeBtns = [document.querySelector('.close-modal'), document.getElementById('closeBtn')];
    const restartBtn = document.getElementById('restartBtn');
    const steps = {
      intro: document.getElementById('stepIntro'),
      question: document.getElementById('stepQuestion'),
      analysis: document.getElementById('stepAnalysis'),
      result: document.getElementById('stepResult'),
    };

    // Questions placeholder
    const questions = [
  { text: '12시까지 야근하기 vs 12시까지 회식하기', opt1: '야근하기', opt2: '회식하기', dim1: 'responsibility', dim2: 'teamwork' },
  { text: '혼자 일하기 vs 팀과 협업하기', opt1: '혼자 일하기', opt2: '팀과 협업하기', dim1: 'responsibility', dim2: 'teamwork' },
  { text: '자료를 꼼꼼히 분석 vs 창의적 아이디어 내기', opt1: '꼼꼼히 분석', opt2: '창의적 아이디어', dim1: 'analytical', dim2: 'creativity' },
  { text: '안전하게 리스크 최소화 vs 도전적인 혁신 추구', opt1: '리스크 최소화', opt2: '혁신 추구', dim1: 'responsibility', dim2: 'innovation' },
  { text: '데이터 기반 의사결정 vs 직관적 의사결정', opt1: '데이터 기반', opt2: '직관 기반', dim1: 'analytical', dim2: 'innovation' },
  { text: '프로젝트 실행 관리 vs 아이디어 구상', opt1: '실행 관리', opt2: '아이디어 구상', dim1: 'responsibility', dim2: 'creativity' },
  { text: '규칙과 절차 준수 vs 유연한 대처', opt1: '규칙 준수', opt2: '유연 대처', dim1: 'responsibility', dim2: 'innovation' },
  { text: '고객 요구 분석 vs 새로운 시장 탐색', opt1: '요구 분석', opt2: '시장 탐색', dim1: 'analytical', dim2: 'innovation' },
  { text: '세부 사항 집중 vs 큰 그림 전략', opt1: '세부 집중', opt2: '큰 그림', dim1: 'analytical', dim2: 'innovation' },
  { text: '오류 찾기 vs 개선 방안 발굴', opt1: '오류 찾기', opt2: '개선 방안', dim1: 'analytical', dim2: 'creativity' },
  { text: '새 기술 학습 vs 기존 방식 유지', opt1: '새 기술 학습', opt2: '기존 유지', dim1: 'innovation', dim2: 'responsibility' },
  { text: '보고서 문서화 vs 구두 커뮤니케이션', opt1: '문서화', opt2: '구두 커뮤니케이션', dim1: 'responsibility', dim2: 'teamwork' },
  { text: '장기 계획 수립 vs 단기 목표 달성', opt1: '장기 계획', opt2: '단기 목표', dim1: 'analytical', dim2: 'responsibility' },
  { text: '정확성 우선 vs 속도 우선', opt1: '정확성', opt2: '속도', dim1: 'responsibility', dim2: 'analytical' },
  { text: '깊이 있는 전문성 vs 다양한 경험', opt1: '전문성', opt2: '다양한 경험', dim1: 'analytical', dim2: 'creativity' },
  { text: '팀 목표 희생 vs 개인 성과 중시', opt1: '팀 희생', opt2: '개인 성과', dim1: 'teamwork', dim2: 'responsibility' },
  { text: '리스크 관리 vs 과감한 시도', opt1: '리스크 관리', opt2: '과감한 시도', dim1: 'responsibility', dim2: 'innovation' },
  { text: '근본적 해결 vs 임시 방편', opt1: '근본 해결', opt2: '임시 방편', dim1: 'analytical', dim2: 'innovation' },
  { text: '자세한 발표 vs 간결한 발표', opt1: '자세한 발표', opt2: '간결한 발표', dim1: 'analytical', dim2: 'creativity' },
  { text: '자기 주도 학습 vs 동료와 스터디', opt1: '자기 주도', opt2: '동료 스터디', dim1: 'analytical', dim2: 'teamwork' }
];// TODO: 20문항 배열
    let selected = [], current=0, answers=[];

    startBtn.onclick = () => modal.classList.add('active');
    beginBtn.onclick = () => {
      // initialize
      selected = shuffle(questions).slice(0,10);
      current=0; answers=[];
      showStep('question'); updateQuestion();
    };
    closeBtns.forEach(btn=>btn.onclick=()=>{ modal.classList.remove('active'); showStep('intro'); });
    restartBtn.onclick = () => beginBtn.click();

    document.getElementById('nextBtn').onclick = () => {
      // record answer and next
      const choice = document.getElementById('ans1Btn').clicked?0:1;
      answers[current]=choice;
      if (current<9) {
        current++; updateQuestion();
      } else showAnalysis();
    };
    document.getElementById('prevBtn').onclick = () => {
      if (current>0) { current--; updateQuestion(); }
    };

    function showStep(name) {
      for (let key in steps) steps[key].classList.remove('active');
      steps[name].classList.add('active');
    }
    function updateQuestion() {
      showStep('question');
      const q = selected[current];
      document.getElementById('questionText').innerText = q.text;
      document.getElementById('ans1Btn').innerText = q.opt1;
      document.getElementById('ans2Btn').innerText = q.opt2;
      document.getElementById('progressBar').style.width = ((current+1)/10*100)+'%';
    }
    function showAnalysis() {
      showStep('analysis');
      const delay = 4000 + Math.random()*5000;
      setTimeout(showResult, delay);
    }
    function showResult() {
      showStep('result');

      // 1) 차원별 점수 집계
      const scores = {};
      selected.forEach((q, i) => {
        const dim = answers[i] === 0 ? q.dim1 : q.dim2;
        scores[dim] = (scores[dim] || 0) + 1;
      });

      // 2) 모든 사업부+직무 리스트 및 성격별 가중치 매핑
      const jobs = [
        // 엔진기계사업부
        { department: '엔진기계사업부', role: '생산기술 지원', desc: '대형/중형 엔진 부품 주조 및 기계가공 생산기술을 지원합니다.', weights: { responsibility:2, analytical:2, teamwork:1, innovation:1, creativity:0 } },
        { department: '엔진기계사업부', role: '조립·시운전 지원', desc: '엔진 조립 및 시운전 성능 분석과 표준 작업을 지원합니다.', weights: { responsibility:2, analytical:2, teamwork:1, innovation:1, creativity:0 } },
        { department: '엔진기계사업부', role: '설비 개선·투자관리', desc: '엔진 시운전 설비 개선 및 친환경 연료 설비 투자를 관리합니다.', weights: { responsibility:2, innovation:2, analytical:1, teamwork:1, creativity:0 } },
        { department: '엔진기계사업부', role: '생산관리', desc: '생산 계획에 따른 공정·품질 관리 및 설비 현대화를 유지보수합니다.', weights: { responsibility:2, analytical:1, teamwork:1, innovation:0, creativity:0 } },
        { department: '엔진기계사업부', role: '생산지원', desc: '사업부 운영전략 및 생산계획 관리, 프로세스 개선을 수행합니다.', weights: { analytical:2, responsibility:2, teamwork:1, innovation:1, creativity:0 } },
        { department: '엔진기계사업부', role: '영업', desc: '친환경 엔진 시스템 홍보 및 고객 기술영업을 담당합니다.', weights: { teamwork:2, responsibility:1, innovation:1, creativity:1, analytical:1 } },
        { department: '엔진기계사업부', role: '상세설계', desc: '엔진 기계 부품 및 시스템 개발, 3D 모델링과 도면 작성 업무를 수행합니다.', weights: { analytical:2, creativity:1, innovation:1, responsibility:1, teamwork:0 } },
        { department: '엔진기계사업부', role: '제어시스템 개발', desc: '엔진 제어시스템 설계와 양산 기술 지원을 담당합니다.', weights: { analytical:2, innovation:2, responsibility:1, creativity:1, teamwork:0 } },
        // 조선사업부
        { department: '조선사업부', role: '기본설계', desc: '선박 기본 사양서 작성 및 계약 기술 협의를 수행합니다.', weights: { analytical:2, responsibility:1, teamwork:1, innovation:1, creativity:0 } },
        { department: '조선사업부', role: '조선설계', desc: '구조해석과 생산도면 설계, 공법 개선을 담당합니다.', weights: { analytical:2, creativity:1, teamwork:1, responsibility:1, innovation:0 } },
        { department: '조선사업부', role: '생산관리', desc: '생산 계획 수립과 안전환경 관리, 현장 감독 업무를 수행합니다.', weights: { responsibility:2, analytical:1, teamwork:1, innovation:0, creativity:0 } },
        // 해양사업부
        { department: '해양사업부', role: '상세설계', desc: '해양플랜트 설계 SPEC 결정, 도면 및 구매사양서 작성을 수행합니다.', weights: { analytical:2, innovation:1, responsibility:1, creativity:1, teamwork:0 } },
        // 특수선사업부
        { department: '특수선사업부', role: '상세설계', desc: '함정 및 특수선 도면 설계와 견적 업무를 담당합니다.', weights: { analytical:2, innovation:1, responsibility:1, teamwork:1, creativity:0 } },
        { department: '특수선사업부', role: '생산관리', desc: '조선 시공 표준 수립 및 자재·설비 관리 감독을 수행합니다.', weights: { responsibility:2, analytical:1, teamwork:1, innovation:0, creativity:0 } },
        { department: '특수선사업부', role: '영업', desc: '함정 해외수출 영업 활동을 담당합니다.', weights: { teamwork:2, innovation:1, responsibility:1, creativity:0, analytical:0 } }
      ];

      // 3) 각 직무별 점수 계산
      const jobScores = jobs.map(job => {
        let total = 0;
        for (const dim in job.weights) {
          total += (scores[dim] || 0) * job.weights[dim];
        }
        return { ...job, total };
      });

      // 4) 최고 점수 직무 선택
      jobScores.sort((a, b) => b.total - a.total);
      const best = jobScores[0];

      // 5) 화면에 반영
      document.querySelector('.result-department').innerText = best.department;
      document.querySelector('.result-role').innerText       = best.role;
      document.querySelector('.result-desc').innerText       = best.desc;
    };
      selected.forEach((q, i) => {
        const dim = answers[i] === 0 ? q.dim1 : q.dim2;
        scores[dim] = (scores[dim] || 0) + 1;
      });

      // 2) 직무 매핑 리스트
      const jobs = [
        {
          department: '엔진기계사업부',
          role: '생산관리',
          desc: '대형 엔진 부품 주조 및 기계가공, 생산 기술 지원을 수행합니다.',
          weights: { responsibility: 2, analytical: 1, teamwork: 1, creativity: 0, innovation: 0 }
        },
        {
          department: '엔진기계사업부',
          role: '생산지원',
          desc: '사업부 운영전략 수립 및 생산계획 관리, 공정 개선을 지원합니다.',
          weights: { responsibility: 2, analytical: 1, teamwork: 1, creativity: 0, innovation: 0 }
        },
        {
          department: '엔진기계사업부',
          role: '영업',
          desc: '선박용 친환경 엔진 시스템 홍보, 시장 분석 및 프로젝트 관리를 수행합니다.',
          weights: { responsibility: 1, analytical: 1, teamwork: 1, creativity: 0, innovation: 1 }
        },
        {
          department: '엔진기계사업부',
          role: '상세설계',
          desc: '엔진 기계 부품/시스템 개발 및 3D 모델링, 도면 작성 업무를 수행합니다.',
          weights: { analytical: 2, innovation: 1, creativity: 1, responsibility: 1, teamwork: 0 }
        },
        {
          department: '조선사업부',
          role: '기본설계',
          desc: '선박 기본틀 설계 및 계약 사양서 작성, 기술 협의 업무를 수행합니다.',
          weights: { analytical: 2, responsibility: 1, teamwork: 1, innovation: 1, creativity: 0 }
        },
        {
          department: '조선사업부',
          role: '조선설계',
          desc: '구조해석과 도면 설계, 생산 자동화 설계 및 승인도면 작성을 수행합니다.',
          weights: { analytical: 2, innovation: 1, creativity: 0, teamwork: 1, responsibility: 1 }
        },
        {
          department: '조선사업부',
          role: '생산관리',
          desc: '선박 건조 공정 관리 및 안전환경 기준 수립, 품질 관리를 수행합니다.',
          weights: { responsibility: 2, analytical: 1, teamwork: 1, creativity: 0, innovation: 0 }
        },
        {
          department: '해양사업부',
          role: '상세설계',
          desc: '해양플랜트 및 신재생 설비 설계를 위한 SPEC, 절차서 작성 등 설계 업무를 수행합니다.',
          weights: { analytical: 2, innovation: 1, creativity: 1, responsibility: 1, teamwork: 0 }
        },
        {
          department: '특수선사업부',
          role: '상세설계',
          desc: '함정 및 특수목적 선종의 견적 및 도면 설계 업무를 수행합니다.',
          weights: { analytical: 2, innovation: 1, creativity: 1, responsibility: 1, teamwork: 0 }
        },
        {
          department: '특수선사업부',
          role: '생산관리',
          desc: '특수선 생산 공정 표준 수립 및 시공 관리, 품질 관리를 수행합니다.',
          weights: { responsibility: 2, analytical: 1, teamwork: 1, creativity: 0, innovation: 0 }
        },
        {
          department: '특수선사업부',
          role: '영업',
          desc: '함정 해외 수출 관련 영업 활동과 프로젝트 관리를 수행합니다.',
          weights: { responsibility: 1, analytical: 1, teamwork: 1, creativity: 0, innovation: 1 }
        }
      ];

      // 3) 직무별 점수 계산
      const jobScores = jobs.map(job => {
        let total = 0;
        for (const dim in job.weights) {
          total += (scores[dim] || 0) * job.weights[dim];
        }
        return { ...job, total };
      });

      // 4) 최고 점수 직무 선택
      jobScores.sort((a, b) => b.total - a.total);
      const best = jobScores[0];

      // 5) 화면 반영
      document.querySelector('.result-department').innerText = best.department;
      document.querySelector('.result-role').innerText = best.role;
      document.querySelector('.result-desc').innerText = best.desc;
    };
      selected.forEach((q, i) => {
        const choiceDim = answers[i] === 0 ? q.dim1 : q.dim2;
        scores[choiceDim] = (scores[choiceDim] || 0) + 1;
      });
      // 최고 점수 차원 선택
      const bestDim = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
      // 차원별 추천 매핑
      const mapping = {
        responsibility: { department: '엔진사업부', role: '품질관리', desc: '엔진 품질 관리 및 최적화 업무를 수행합니다.' },
        teamwork:       { department: '인사조직부', role: '협업지원', desc: '팀원과의 원활한 소통과 협업을 지원합니다.' },
        analytical:     { department: '조선사업부', role: '상세설계', desc: '도면 검토 및 설계 최적화를 담당합니다.' },
        creativity:     { department: '연구개발부', role: '신기술개발', desc: '새로운 기술 및 제품 아이디어를 개발합니다.' },
        innovation:     { department: 'IT혁신부', role: '시스템개발', desc: '최신 IT 솔루션을 기획 및 구현합니다.' }
      };
      const result = mapping[bestDim] || mapping['analytical'];
      document.querySelector('.result-department').innerText = result.department;
      document.querySelector('.result-role').innerText = result.role;
      document.querySelector('.result-desc').innerText = result.desc;
    }
    function shuffle(arr) { return arr.sort(()=>Math.random()-0.5); }

    window.addEventListener('load',()=>{
      setTimeout(()=>{ document.getElementById('splash').style.display='none'; document.body.classList.add('loaded'); }, 800);
    });
  </script>
</body>
</html>
